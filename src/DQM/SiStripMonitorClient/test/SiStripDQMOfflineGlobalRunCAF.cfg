process SiStripDQMOfflineGlobalRunCAF = {

  service = MessageLogger {
    untracked vstring destinations = {
      "cout"
    }
    untracked PSet cout = {
      untracked string threshold = "INFO"
    }
  }
  
  untracked PSet options = {
    untracked bool wantSummary = true
  }  
  
  ### MAGNETIC FIELD
  
//   include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"   
  es_module localUniform = UniformMagneticFieldESProducer {
    double ZFieldInTesla = 0.0
  }
  es_prefer localUniform = UniformMagneticFieldESProducer {}
   
  ### GEOMETRY
  
  include "Configuration/StandardSequences/data/Geometry.cff"
  
  ### CALIBRATION
  
  es_source siStripCond = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
  replace siStripCond.toGet = {
    { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_TKCC_21X_v3_hlt" }     ,
    { string record = "SiStripNoisesRcd"     string tag = "SiStripNoise_TKCC_21X_v3_hlt" }         ,
    { string record = "SiStripBadFiberRcd"   string tag = "SiStripBadChannel_TKCC_21X_v2_offline" },
    { string record = "SiStripBadChannelRcd" string tag = "SiStripBadChannel_TKCC_21X_v3_hlt" }    ,
    { string record = "SiStripFedCablingRcd" string tag = "SiStripFedCabling_TKCC_21X_v3_hlt" }
  }
  # uncomment for Oracle access at CERN
  replace siStripCond.connect                         = "oracle://cms_orcoff_prod/CMS_COND_21X_STRIP"
  replace siStripCond.DBParameters.authenticationPath = "/afs/cern.ch/cms/DB/conddb"

  es_module sistripconn = SiStripConnectivity {}

  include "CalibTracker/SiStripESProducers/data/SiStripQualityESProducer.cfi"
  replace siStripQualityESProducer.ListOfRecordToMerge = {
    { string record = "SiStripDetCablingRcd" string tag = "" },
    { string record = "SiStripBadChannelRcd" string tag = "" },
    { string record = "SiStripBadFiberRcd"   string tag = "" }
  }

  ## Fake Conditions
  include "CalibTracker/Configuration/data/SiStripGain/SiStripGain_Fake.cff"
  include "CalibTracker/Configuration/data/SiStripLorentzAngle/SiStripLorentzAngle_Fake.cff"
  include "CalibTracker/Configuration/data/SiPixelLorentzAngle/SiPixelLorentzAngle_Fake.cff"
  include "CalibTracker/Configuration/data/TrackerAlignment/TrackerAlignment_Fake.cff"

  
  ### SISTRIP DQM
  
  include "DQM/SiStripMonitorClient/data/SiStripDQMOfflineGlobalRunCAF.cff"
  
  ### HLT FILTER
  
  module hltFilter = HLTHighLevel {
    vstring HLTPaths           = {
      "CandHLTTrackerCosmicsCoTF",
      "CandHLTTrackerCosmicsRS"  ,
      "CandHLTTrackerCosmicsCTF"
    }
    bool     andOr             = true
    InputTag TriggerResultsTag = TriggerResults::FU
  }
  
  ### SCHEDULING
  
  path p = {
//     SiStripDQMRecoFromRaw               , // comment this out when running from RECO or with full reconstruction
//     hltFilter                           , // comment this out to switch off the HLT pre-selection
    SiStripDQMRecoGlobalRunCAF          ,
    SiStripDQMSourceGlobalRunCAF_reduced,
    SiStripDQMClientGlobalRunCAF        ,
    qTester                             ,
    dqmSaver
  }
  
  ### INPUT
  
  source = PoolSource { 
    untracked vstring fileNames = {
//       # RAW from MW33 run 56493
//       "/store/data/Commissioning08/Cosmics/RAW/MW33_v1/000/056/493/0053249A-456A-DD11-83FE-001D09F24448.root" // 25730 events
      # RECO from MW33 run 56493
      "/store/data/Commissioning08/Cosmics/RECO/MW33_v1/000/056/493/02DAAD57-616A-DD11-BBAB-001617E30E28.root" // 25773 events
    }
  }
  
  untracked PSet maxEvents = {
    untracked int32 input = 1000
  }

}
