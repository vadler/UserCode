process SiStripDQMOfflineGlobalRunCAF = {

  service = MessageLogger {
    untracked vstring destinations = {
      "cout"
    }
    untracked PSet cout = {
      untracked string threshold = "INFO"
    }
  }
  
  untracked PSet options = {
    untracked bool wantSummary = true
  }  
  
  ### MAGNETIC FIELD
  
  include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"   
   
  ### GEOMETRY
  
  ## Tracker Geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
  
  ## Tracker Numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
  
  ## CMS Geomtry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  
  ### CALIBRATION
  
  es_source siStripCond = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
  replace siStripCond.toGet = {
    { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_TKCC_20X_v3_hlt"} ,
    { string record = "SiStripNoisesRcd"     string tag = "SiStripNoise_TKCC_20X_v3_hlt"} ,
    { string record = "SiStripBadFiberRcd"   string tag = "SiStripBadChannel_TKCC_20X_v2_offline"},
    { string record = "SiStripBadChannelRcd" string tag = "SiStripBadChannel_TKCC_20X_v3_hlt"},
    { string record = "SiStripFedCablingRcd" string tag = "SiStripFedCabling_TKCC_20X_v3_hlt"}
  }
  # oracle access at CERN
  replace siStripCond.connect                         = "oracle://cms_orcoff_prod/CMS_COND_20X_STRIP"
  replace siStripCond.DBParameters.authenticationPath = "/afs/cern.ch/cms/DB/conddb"

  es_module sistripconn = SiStripConnectivity {}

  include "CalibTracker/SiStripESProducers/data/SiStripQualityESProducer.cfi"
  replace siStripQualityESProducer.ListOfRecordToMerge = {
    { string record = "SiStripDetCablingRcd" string tag = "" },
    { string record = "SiStripBadChannelRcd" string tag = "" },
    { string record = "SiStripBadFiberRcd"   string tag = "" }
  }
  replace siStripQualityESProducer.ReduceGranularity               = true
  replace siStripQualityESProducer.ThresholdForReducedGranularity  =  0.2       

  include "RecoVertex/BeamSpotProducer/data/BeamSpotEarlyCollision.cfi"
  replace BeamSpotEarlyCollision.connect = "oracle://cms_orcoff_prod/CMS_COND_20X_BEAMSPOT"

  ## Fake Conditions
  include "CalibTracker/Configuration/data/SiStripGain/SiStripGain_Fake.cff"
  include "CalibTracker/Configuration/data/SiStripLorentzAngle/SiStripLorentzAngle_Fake.cff"
  include "CalibTracker/Configuration/data/SiPixelLorentzAngle/SiPixelLorentzAngle_Fake.cff"
  
  ### WEB SERVICE
  service = ModuleWebRegistry {}

  ### SISTRIP DQM
  include "DQM/SiStripMonitorClient/data/SiStripDQMOfflineGlobalRunCAF.cff"
  
  ### HLT FILTER
  module hltFilter = HLTHighLevel {
    vstring HLTPaths           = {
      "CandHLTTrackerCosmicsCoTF",
      "CandHLTTrackerCosmicsRS",
      "CandHLTTrackerCosmicsCTF"
    }
    bool     andOr             = true
    InputTag TriggerResultsTag = TriggerResults::FU
  }
  
  ### SCHEDULING
  
  path p = {
    hltFilter,                            // comment this out to switch off the HLT pre-selection
    SiStripDQMRecoGlobalRunCAF,
    SiStripDQMSourceGlobalRunCAF_reduced,
    SiStripDQMClientGlobalRunCAF,
    qTester,
    dqmSaver
  }
  
  ### INPUT
  
  source = PoolSource { 
    untracked vstring fileNames = {
      # from CRUZET3 run 51486
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/1037398E-2551-DD11-B1B0-000423D98FBC.root',
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/10BED589-2951-DD11-B71D-001617E30CE8.root',
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/2C1A7C89-2951-DD11-9606-000423D9939C.root',
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/2E1D548D-2551-DD11-AB4B-000423D987E0.root',
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/32B92C6E-2651-DD11-A97F-000423D95220.root',
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/3419CC91-2951-DD11-8A03-000423D6C8EE.root',
      '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/3A33B5CC-2B51-DD11-919A-001617DBCF1E.root'
    }
  }
  
  untracked PSet maxEvents = {
    untracked int32 input = 1000
  }

}
