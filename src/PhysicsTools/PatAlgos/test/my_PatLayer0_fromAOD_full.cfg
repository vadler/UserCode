process PAT = {


  ### General ###

  # initialize MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.threshold = "INFO"
  replace MessageLogger.cerr.INFO = {
      untracked PSet default          = { untracked int32 limit =  0 }
      untracked PSet PATLayer0Summary = { untracked int32 limit = -1 }
  }
  replace MessageLogger.categories += "PATLayer0Summary"

  # return filter & timing reports
  untracked PSet options = { untracked bool wantSummary = true }


  ### Input ###

  untracked PSet maxEvents = { untracked int32 input = 100 }

//   source = PoolSource { untracked vstring fileNames = { "file:/afs/cern.ch/cms/PRS/top/cmssw-data/relval200-for-pat-testing/RelValTTbar-210p5-AODSIM.100.root" } }
  # dataset /RelValTTbar/CMSSW_2_1_0_pre5-RelVal-1212543891-STARTUP-2nd-STARTUP/GEN-SIM-DIGI-RAW-HLTDEBUG-RECO
//   source = PoolSource {
//     untracked vstring fileNames = {
//       "/store/relval/2008/6/4/RelVal-RelValTTbar-1212543891-STARTUP-2nd/0000/185E7133-9C32-DD11-BC8E-001617E30CC8.root"
//     }
//   }
  # dataset /RelValZEE/CMSSW_2_1_0_pre5-RelVal-1212543891-STARTUP-2nd-STARTUP/GEN-SIM-DIGI-RAW-HLTDEBUG-RECO
//   source = PoolSource {
//     untracked vstring fileNames = {
//       "/store/relval/2008/6/4/RelVal-RelValZEE-1212543891-STARTUP-2nd/0000/EC78F835-9C32-DD11-BBFE-001617E30F50.root",
//       "/store/relval/2008/6/4/RelVal-RelValZEE-1212543891-STARTUP-2nd/0000/F2BA62E8-9632-DD11-BC30-001617C3B76A.root"
//     }
//   }
  # dataset /RelValTTbar/CMSSW_2_1_0_pre5-RelVal-1212531852-IDEAL_V1-2nd-IDEAL_V1/GEN-SIM-DIGI-RAW-HLTDEBUG-RECO
  source = PoolSource {
    untracked vstring fileNames = {
      "/store/relval/2008/6/4/RelVal-RelValTTbar-1212531852-IDEAL_V1-2nd/0000/32E6ABAA-A232-DD11-BD3B-000423D6B48C.root",
      "/store/relval/2008/6/4/RelVal-RelValTTbar-1212531852-IDEAL_V1-2nd/0000/38DF7E6D-9F32-DD11-80C3-000423D6BA18.root",
      "/store/relval/2008/6/4/RelVal-RelValTTbar-1212531852-IDEAL_V1-2nd/0000/F2883AD8-9732-DD11-A42C-000423D6CA42.root"
    }
  }
   

  ### PAT steering ###

  include "PhysicsTools/PatAlgos/data/patLayer0.cff"
//   include "PhysicsTools/PatAlgos/test/patLayer0_ReplaceDefaults_full.cff"
  
  module triggerSummaryAnalyzerAOD = TriggerSummaryAnalyzerAOD {
    InputTag inputTag = hltTriggerSummaryAOD::HLT
  }

  path p = {
    triggerSummaryAnalyzerAOD,
    patLayer0                             # use patLayer0_withoutPFTau if you can't get PFTaus working 
  }


  ### Output ###

  # define the event content
  block patEventContent = {
    untracked vstring outputCommands = {
      "drop *"
    }
  }
  include "PhysicsTools/PatAlgos/data/patLayer0_EventContent.cff"
  replace patEventContent.outputCommands += patLayer0EventContent.outputCommands

  # only accept events passing the complete path
  block patEventSelection = {
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p" }
    }
  }

  # the actual output module
  module out = PoolOutputModule {
    untracked string fileName = "output/PATLayer0_Output.fromAOD_full.root"
    using patEventSelection
    using patEventContent
    untracked bool verbose = false
  }

  endpath outpath = { out }


}
